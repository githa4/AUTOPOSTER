# 06üîµ-SUPABASE ‚Äî –∞–Ω–∞–ª–∏–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

–°—Ç–∞—Ç—É—Å: üöß –í —Ä–∞–±–æ—Ç–µ
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî• –ö—Ä–∏—Ç–∏—á–Ω–æ

---

## TL;DR
Supabase —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ **Auth + Cloud Sync** –∏ –∫–∞–∫ **–æ—Å–Ω–æ–≤–Ω–∞—è –ë–î** –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π (posts/projects/templates/integrations) + **Storage** –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –ü—Ä–∏ —ç—Ç–æ–º –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ P0 —Ä–∏—Å–∫–æ–≤: **—Ö–∞—Ä–¥–∫–æ–¥ URL/ANON –∫–ª—é—á–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**, —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö API-–∫–ª—é—á–µ–π –≤ `profiles.settings` –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ, –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö SQL-–∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (schema/RLS/storage), —Ö–æ—Ç—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —É–ø–æ–º—è–Ω—É—Ç—ã `supabase_*.sql/txt`, –∫–æ—Ç–æ—Ä—ã—Ö —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ—Ç –≤ –ø—Ä–æ–µ–∫—Ç–µ.

---

## –ì–¥–µ –≤ –∫–æ–¥–µ (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)

### –ö–ª–∏–µ–Ω—Ç Supabase
- `lib/supabaseClient.ts` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–µ–Ω—Ç + —Ç–∏–ø—ã —Ç–∞–±–ª–∏—Ü + `uploadPostImage()` (Storage).
- `src/lib/supabaseClient.ts` ‚Äî –¥—É–±–ª–∏–∫–∞—Ç –∫–ª–∏–µ–Ω—Ç–∞ (–ø–æ –∫–æ–¥—É —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –≤–µ—Ä—Ö–Ω–∏–º).

### Auth
- `components/AuthModal.tsx` ‚Äî `supabase.auth.signUp()` / `signInWithPassword()`.
- `context/AppContext.tsx` ‚Äî `getSession()` + `onAuthStateChange()` –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ `user`.

### Cloud Sync / DB –æ–ø–µ—Ä–∞—Ü–∏–∏
- `context/AppContext.tsx`:
  - `profiles.settings` (JSON) ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  - `integrations` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞/–º–∏–≥—Ä–∞—Ü–∏—è –∏–∑ localStorage –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ.
  - `posts/projects/templates` ‚Äî –≤—Å—Ç–∞–≤–∫–∞/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö –≤ UI.
- `components/SettingsPage.tsx` ‚Äî Cloud Viewer —á–∏—Ç–∞–µ—Ç `profiles` –∏ `integrations`.

### Storage
- `lib/supabaseClient.ts` ‚Äî bucket `post_images`.
- `hooks/usePostGeneration.ts` ‚Äî –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ Storage –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `user`.

---

## –ö–∞–∫ —Å–µ–π—á–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `VITE_SUPABASE_URL`
- `VITE_SUPABASE_ANON_KEY`

–§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–µ–∫—Ç —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç CRA-–ø–æ–¥–æ–±–Ω—ã–µ –∏–º–µ–Ω–∞, –Ω–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Vite:
- `REACT_APP_SUPABASE_URL`
- `REACT_APP_SUPABASE_ANON_KEY`

### –§–æ–ª–ª–±–µ–∫ –Ω–∞ ¬´–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π¬ª –ø—Ä–æ–µ–∫—Ç
–í `lib/supabaseClient.ts` –∏ `src/lib/supabaseClient.ts` –µ—Å—Ç—å:
- `PROVIDED_URL = https://...supabase.co`
- `PROVIDED_ANON_KEY = ...`

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç: **–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É Supabase –ø—Ä–æ–µ–∫—Ç—É –¥–∞–∂–µ –±–µ–∑ `.env.local`**.

### –í–∞–∂–Ω–∞—è –¥–µ—Ç–∞–ª—å: importmap –≤ index.html
`index.html` —Å–æ–¥–µ—Ä–∂–∏—Ç `importmap` –∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç `@supabase/supabase-js` —á–µ—Ä–µ–∑ `https://esm.sh/...`.
–î–∞–∂–µ –µ—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –æ–±—ã—á–Ω–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–º–ø–æ—Ä—Ç—ã, —ç—Ç–æ —Å–æ–∑–¥–∞—ë—Ç:
- —Ä–∏—Å–∫ ¬´–ø–æ–¥–º–µ—à–∏–≤–∞–Ω–∏—è¬ª CDN-–≤–µ—Ä—Å–∏–∏,
- —Ä–∏—Å–∫ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π,
- –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ CDN –≤ production.

---

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–∏–Ω—Ñ–µ—Ä–µ–Ω—Å –ø–æ –∑–∞–ø—Ä–æ—Å–∞–º)

> –°—Ö–µ–º–∞ –ë–î –≤ –≤–∏–¥–µ SQL –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, –ø–æ—ç—Ç–æ–º—É –Ω–∏–∂–µ ‚Äî **–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ –∫–æ–¥—É**.

### –¢–∞–±–ª–∏—Ü–∞ `profiles`
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ per-user —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:
- –∫–ª—é—á: `id = auth.user.id`
- –ø–æ–ª–µ: `settings` (JSONB)
- –ø–æ–ª–µ: `updated_at`

`settings` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞–∫ –º–∏–Ω–∏–º—É–º:
- `apiKeys` ‚Äî –∫–æ—à–µ–ª—ë–∫ –∫–ª—é—á–µ–π AI-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (–≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Äî –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ)
- `modelConfig`
- `favorites`
- `telegramConfig`

–ì–¥–µ: `context/AppContext.tsx`, `components/SettingsPage.tsx`.

### –¢–∞–±–ª–∏—Ü–∞ `integrations`
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–∞–Ω–∞–ª–æ–≤ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (destinations), —Å–µ–π—á–∞—Å –≤ UI —Ñ–æ–∫—É—Å –Ω–∞ Telegram.
–í—Å—Ç–∞–≤–∫–∞/—á—Ç–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ `user_id`.
–ü–æ–ª—è (–ø–æ —Ç–∏–ø–∞–º –≤ `lib/supabaseClient.ts`):
- `id` (uuid string)
- `user_id`
- `provider` (–Ω–∞–ø—Ä–∏–º–µ—Ä `telegram`)
- `name`
- `credentials` (JSONB)
- `is_active` (bool)
- `created_at`

### –¢–∞–±–ª–∏—Ü–∞ `posts`
–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è (draft/published/scheduled):
- `id`
- `user_id`
- `project_id` (nullable)
- `topic`, `content`
- `image_url` (–≤ –∫–æ–¥–µ —Å–µ–π—á–∞—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –∏ URL, –∏ base64)
- `status`
- `scheduled_at` (ISO string –∏–ª–∏ null)
- `stats` (JSONB)
- `created_at`

### –¢–∞–±–ª–∏—Ü–∞ `projects`
–ü–∞–ø–∫–∏/–ø—Ä–æ–µ–∫—Ç—ã:
- `id`
- `user_id`
- `name`
- `config` (JSONB)
- `created_at`

### –¢–∞–±–ª–∏—Ü–∞ `templates`
–®–∞–±–ª–æ–Ω—ã:
- `id`
- `user_id`
- `name`
- `config` (JSONB)
- `created_at`

---

## –ß—Ç–æ —Å–∏–Ω–∫–∞–µ—Ç—Å—è –≤ Supabase, –∞ —á—Ç–æ –ø–æ–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ

### –£–∂–µ —Å–∏–Ω–∫–∞–µ—Ç—Å—è (–ø—Ä–∏ –ª–æ–≥–∏–Ω–µ)
- `profiles.settings` (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- `integrations` (—Å –º–∏–≥—Ä–∞—Ü–∏–µ–π –∏–∑ localStorage, –µ—Å–ª–∏ –≤ –æ–±–ª–∞–∫–µ –ø—É—Å—Ç–æ)

### –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ Supabase, –Ω–æ –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
–ü–æ —Ç–µ–∫—É—â–µ–º—É –∫–æ–¥—É, `posts/projects/templates`:
- –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö (insert/update/delete)
- –Ω–æ –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ¬´hydrate¬ª —ç—Ç–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –∏–∑ Supabase

–°–ª–µ–¥—Å—Ç–≤–∏–µ: –Ω–∞ –¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏–ª–∏ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ localStorage –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–µ —É–≤–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é/–ø—Ä–æ–µ–∫—Ç—ã/—à–∞–±–ª–æ–Ω—ã, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –≤ Supabase.

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–Ω–µ–∫—Ç–∞ (–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏)

### –í UI (—Å–∞–º—ã–π –Ω–∞–¥—ë–∂–Ω—ã–π –±—ã—Å—Ç—Ä—ã–π smoke)
1) –ó–∞–ø—É—Å—Ç–∏ `npm run dev`.
2) –û—Ç–∫—Ä–æ–π –º–æ–¥–∞–ª–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∑–∞–ª–æ–≥–∏–Ω—å—Å—è.
3) –û—Ç–∫—Ä–æ–π `Cloud Viewer` –≤ Settings:
   - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è `profiles.settings`
   - –∏ `integrations` –ø–æ `user_id`

–ï—Å–ª–∏ Cloud Viewer –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –≤–∏–¥–∞ `fetch failed` ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω–æ:
- –Ω–µ–≤–µ—Ä–Ω—ã–π `VITE_SUPABASE_URL`/`VITE_SUPABASE_ANON_KEY`,
- –±–ª–æ–∫ —Å–µ—Ç–∏/–ø—Ä–æ–∫—Å–∏,
- CORS/SSL –ø—Ä–æ–±–ª–µ–º—ã,
- –ª–∏–±–æ Supabase –ø—Ä–æ–µ–∫—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (—Ä—É—á–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
```js
import { supabase } from './lib/supabaseClient'
await supabase.auth.getSession()
await supabase.from('profiles').select('id').limit(1)
```

---

## P0 / P1 –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–∏—Å–∫–∏ (–ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞)

### P0-1) –•–∞—Ä–¥–∫–æ–¥ Supabase URL/ANON KEY –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
–§–∞–∫—Ç: `PROVIDED_URL/PROVIDED_ANON_KEY` –ª–µ–∂–∞—Ç –≤ –∫–æ–¥–µ.
–†–∏—Å–∫:
- –ø—Ä–∏–≤—è–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫ –æ–¥–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç—É Supabase ¬´–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬ª,
- —Å–ª–æ–∂–Ω–µ–µ —Ä–∞–∑–¥–µ–ª—è—Ç—å dev/stage/prod,
- —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∞—Ç–∞–∫ (anon key –ø—É–±–ª–∏—á–Ω—ã–π –ø–æ –∑–∞–¥—É–º–∫–µ, –Ω–æ –ø—Ä–æ–µ–∫—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—á–µ–≤–∏–¥–Ω–æ–π —Ü–µ–ª—å—é; –ø—Ä–∏ —Å–ª–∞–±—ã—Ö RLS/Policy —ç—Ç–æ –æ–ø–∞—Å–Ω–æ).

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- —É–±—Ä–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –∏ —Ç—Ä–µ–±–æ–≤–∞—Ç—å `.env.local` –≤ dev,
- –ª–∏–±–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è demo-—Ä–µ–∂–∏–º–∞, –Ω–æ —Å —É—Ä–µ–∑–∞–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–º Supabase –ø—Ä–æ–µ–∫—Ç–æ–º.

### P0-2) –°–µ–∫—Ä–µ—Ç—ã —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å–µ–π—á–∞—Å –∂–∏–≤—É—Ç –≤ `profiles.settings`
`apiKeys` (Gemini/OpenRouter/Kie/Replicate) —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ `profiles.settings`.
–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö API –∫–ª—é—á–µ–π –≤ –ë–î.

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è ¬´–∫–∞–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å¬ª:
- —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ Supabase Vault (–∏–ª–∏ —à–∏—Ñ—Ä–æ–≤–∞—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ) –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Edge Functions,
- –∫–ª–∏–µ–Ω—Ç –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º –≤—ã–∑—ã–≤–∞–µ—Ç `supabase.functions.invoke()`.

### P0-3) –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ SQL/Setup —Ñ–∞–π–ª—ã
`doc/01üîµ-README.md` –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç `supabase_schema.sql`, `supabase_setup.txt` –∏ –¥—Ä., –Ω–æ —Ñ–∞–π–ª–æ–≤ –Ω–µ—Ç.
–≠—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç:
- –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏—è,
- –∞—É–¥–∏—Ç RLS/Policy,
- –±—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–Ω–æ—Å/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Supabase.

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –¥–æ–±–∞–≤–∏—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä SQL/–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (schema + RLS/policies + storage/bucket –Ω–∞—Å—Ç—Ä–æ–π–∫–∏) –∫–∞–∫ ‚Äú–∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã‚Äù.

### P1-1) –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ Supabase
–ï—Å—Ç—å 2 —Ñ–∞–π–ª–∞ –∫–ª–∏–µ–Ω—Ç–∞ (`lib/` –∏ `src/lib/`).
–†–∏—Å–∫: —Ä–∞–∑—ä–µ–∑–¥ –∫–æ–Ω—Ñ–∏–≥–æ–≤/—Ç–∏–ø–æ–≤, —Å–ª—É—á–∞–π–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –Ω–µ —Ç–æ–≥–æ –º–æ–¥—É–ª—è.

### P1-2) `image_url` –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å base64
–°–µ–π—á–∞—Å –≤ `posts.image_url` –∏–Ω–æ–≥–¥–∞ –ø–∏—à–µ—Ç—Å—è URL, –∏–Ω–æ–≥–¥–∞ base64.
–≠—Ç–æ –ø–ª–æ—Ö–æ –¥–ª—è:
- —Ä–∞–∑–º–µ—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã,
- –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏,
- –±—É–¥—É—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤/–ø–æ–∏—Å–∫–∞.

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –≤—Å–µ–≥–¥–∞ –≥—Ä—É–∑–∏—Ç—å –≤ Storage –∏ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–π URL (–∏–ª–∏ –ø—É—Ç—å + signed URL –≤—ã–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é).

---

## –ß—Ç–æ –µ—â—ë ¬´–Ω—É–∂–Ω–æ –∏ –º–æ–∂–Ω–æ¬ª –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ Supabase (–ø–ª–∞–Ω)

### P1 (–¥–∞—ë—Ç –º–∞–∫—Å–∏–º—É–º —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –±—ã—Å—Ç—Ä–æ)
1) **Hydrate –∏–∑ Supabase** –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ:
   - `posts` (–∏—Å—Ç–æ—Ä–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤)
   - `projects` (–ø–∞–ø–∫–∏)
   - `templates` (—à–∞–±–ª–æ–Ω—ã)

2) **Edge Functions –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏**
   - Telegram –ø—É–±–ª–∏–∫–∞—Ü–∏—è (–±–æ—Ç-—Ç–æ–∫–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ secret)
   - Facebook/–¥—Ä—É–≥–∏–µ –∫–∞–Ω–∞–ª—ã (—Ä–µ—à–µ–Ω–∏–µ CORS –∏ —Å–µ–∫—Ä–µ—Ç–æ–≤)

3) **–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è**
   - —Ç–∞–±–ª–∏—Ü–∞ `model_assignments` (—Ä–æ–ª—å ‚Üí –º–æ–¥–µ–ª—å/–ø—Ä–æ–≤–∞–π–¥–µ—Ä)
   - —Ç–∞–±–ª–∏—Ü–∞ `provider_models_cache` (–∫—ç—à –º–æ–¥–µ–ª–µ–π + last_sync_at)

### P2 (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å/–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å)
1) **–£–≤–µ—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É**
   - `generate-content` Edge Function
   - `generate-image` Edge Function
   - –ª–∏–º–∏—Ç—ã/–∫–≤–æ—Ç—ã —Å—á–∏—Ç–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

2) **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ/ Vault –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API –∫–ª—é—á–µ–π**
   - —Ö—Ä–∞–Ω–∏—Ç—å –∫–ª—é—á–∏ –Ω–µ –≤ `profiles.settings`, –∞ –≤ –∑–∞—â–∏—â—ë–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

3) **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫**
   - `pg_cron`/Scheduled Edge Functions –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π

### P3 (–ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
- Realtime –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—É–±–ª–∏–∫–∞—Ü–∏–π
- –∞—É–¥–∏—Ç-–ª–æ–≥ (—Ç–∞–±–ª–∏—Ü–∞ `audit_events`)
- billing/subscriptions (Stripe + —Ç–∞–±–ª–∏—Ü—ã –ø–æ–¥–ø–∏—Å–æ–∫)

---

## –ß–µ–∫–ª–∏—Å—Ç —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ Supabase-—á–∞—Å—Ç–∏
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ª–æ–≥–∏–Ω –Ω–µ –ø–∞–¥–∞—é—Ç
- –ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ –≤ `Cloud Viewer` –≤–∏–¥–Ω—ã `profiles.settings` –∏ `integrations` —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å –≤ `integrations` —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º `user_id`
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–¥ –ª–æ–≥–∏–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ Storage bucket `post_images`
- –ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `posts`, –∏ —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ publish/schedule

---

## –û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã (–Ω—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å)
1) –ï—Å—Ç—å –ª–∏ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ RLS policies –¥–ª—è `profiles/integrations/posts/projects/templates`?
2) –ù—É–∂–µ–Ω –ª–∏ —Ä–µ–∂–∏–º ¬´demo –±–µ–∑ Supabase¬ª –∏–ª–∏ Supabase –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤—Å–µ–≥–¥–∞?
3) –ö–∞–∫–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–∫—Ä–æ–º–µ Telegram) —Å—á–∏—Ç–∞–µ–º –±–ª–∏–∂–∞–π—à–∏–º–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É –¥–ª—è Edge Functions?
